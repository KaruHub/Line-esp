-- Load Orion Library
local success, OrionLib = pcall(function()
    return loadstring(game:HttpGet('https://raw.githubusercontent.com/shlexware/Orion/main/source'))()
end)

if not success or not OrionLib then
    warn("Failed to load Orion Library! Check the URL or your connection.")
    return
end

-- Creating the Window
local Window = OrionLib:MakeWindow({
    Name = "Bridge Teleporter & ESP",
    HidePremium = false,
    SaveConfig = true,
    ConfigFolder = "OrionTest"
})

-- Player Tab
local PlayerTab = Window:MakeTab({
    Name = "Player",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Player Section
local PlayerSection = PlayerTab:AddSection({
    Name = "Player Settings"
})

-- WalkSpeed Slider
PlayerTab:AddSlider({
    Name = "WalkSpeed",
    Min = 16,
    Max = 1000,
    Default = 16,
    Increment = 1,
    Callback = function(Value)
        local character = game.Players.LocalPlayer.Character
        if character and character:FindFirstChild("Humanoid") then
            character.Humanoid.WalkSpeed = Value
        else
            warn("Character or Humanoid not found!")
        end
    end
})

-- JumpPower Slider
PlayerTab:AddSlider({
    Name = "JumpPower",
    Min = 50,
    Max = 1000,
    Default = 50,
    Increment = 1,
    Callback = function(Value)
        local character = game.Players.LocalPlayer.Character
        if character and character:FindFirstChild("Humanoid") then
            character.Humanoid.JumpPower = Value
        else
            warn("Character or Humanoid not found!")
        end
    end
})

-- Camera Max Zoom Distance Slider
PlayerTab:AddSlider({
    Name = "Max Zoom Distance",
    Min = 10,
    Max = 50000,
    Default = 400,
    Increment = 50,
    Callback = function(Value)
        game.Players.LocalPlayer.CameraMaxZoomDistance = Value
    end
})

-- Teleport to Center Button
PlayerTab:AddButton({
    Name = "Teleport to Center",
    Callback = function()
        local character = game.Players.LocalPlayer.Character
        if character and character:FindFirstChild("HumanoidRootPart") then
            character.HumanoidRootPart.CFrame = CFrame.new(-1040, 201, 90)
        else
            warn("Character or HumanoidRootPart not found!")
        end
    end
})

-- ESP System
local espEnabled = false
local espColor = Color3.fromRGB(255, 0, 0)
local espRefreshRate = 3 -- Refresh every 3 seconds

local function createESP(player)
    if player ~= game.Players.LocalPlayer and player.Character and player.Character:FindFirstChild("Head") then
        local head = player.Character.Head
        local billboard = head:FindFirstChild("BillboardGui")

        if not billboard then
            billboard = Instance.new("BillboardGui", head)
            billboard.Size = UDim2.new(5, 0, 2, 0)
            billboard.AlwaysOnTop = true

            local text = Instance.new("TextLabel", billboard)
            text.Size = UDim2.new(1, 0, 1, 0)
            text.Text = player.Name
            text.TextColor3 = espColor
            text.BackgroundTransparency = 1
        else
            billboard.TextLabel.TextColor3 = espColor
        end
    end
end

local function removeESP(player)
    if player.Character and player.Character:FindFirstChild("Head") then
        local head = player.Character.Head
        local billboard = head:FindFirstChild("BillboardGui")
        if billboard then
            billboard:Destroy()
        end
    end
end

local function updateESP()
    for _, player in pairs(game.Players:GetPlayers()) do
        if espEnabled then
            createESP(player)
        else
            removeESP(player)
        end
    end
end

PlayerTab:AddToggle({
    Name = "Enable ESP",
    Default = false,
    Callback = function(State)
        espEnabled = State
        if espEnabled then
            updateESP()
            while espEnabled do
                wait(espRefreshRate)
                updateESP()
            end
        else
            updateESP()
        end
    end
})

PlayerTab:AddColorpicker({
    Name = "ESP Color",
    Default = Color3.fromRGB(255, 0, 0),
    Callback = function(Value)
        espColor = Value
        if espEnabled then
            updateESP()
        end
    end
})

-- Bridge Teleportation
local bridges = {
    BlueBridge = game.Workspace:FindFirstChild("BlueBridge"),
    CyanBridge = game.Workspace:FindFirstChild("CyanBridge"),
    GreenBridge = game.Workspace:FindFirstChild("GreenBridge"),
    OrangeBridge = game.Workspace:FindFirstChild("OrangeBridge"),
    PinkBridge = game.Workspace:FindFirstChild("PinkBridge"),
    PurpleBridge = game.Workspace:FindFirstChild("PurpleBridge"),
    RedBridge = game.Workspace:FindFirstChild("RedBridge"),
    YellowBridge = game.Workspace:FindFirstChild("YellowBridge")
}

local function teleportToBridge(bridgeName)
    local bridge = bridges[bridgeName]
    if bridge and bridge.PrimaryPart then
        local character = game.Players.LocalPlayer.Character
        if character and character:FindFirstChild("HumanoidRootPart") then
            character.HumanoidRootPart.CFrame = bridge.PrimaryPart.CFrame
        else
            warn("Character or HumanoidRootPart not found!")
        end
    else
        warn("Bridge not found or missing PrimaryPart: " .. tostring(bridgeName))
    end
end

-- Bridges Dropdown
PlayerTab:AddDropdown({
    Name = "Select a Bridge",
    Default = "BlueBridge",
    Options = {"BlueBridge", "CyanBridge", "GreenBridge", "OrangeBridge", "PinkBridge", "PurpleBridge", "RedBridge", "YellowBridge"},
    Callback = function(Value)
        teleportToBridge(Value)
    end
})

-- Others Tab
local OtherTab = Window:MakeTab({
    Name = "Others",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Infinite Yield Button
OtherTab:AddButton({
    Name = "Infinite Yield",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/EdgeIY/infiniteyield/master/source"))()
    end
})

-- Dex Explorer Button
OtherTab:AddButton({
    Name = "Dex Explorer",
    Callback = function()
        loadstring(game:HttpGet("https://rawscripts.net/raw/Universal-Script-Keyless-mobile-dex-17888"))()
    end
})

-- SimpleSpy Button
OtherTab:AddButton({
    Name = "SimpleSpy",
    Callback = function()
        loadstring(game:HttpGet("https://raw.githubusercontent.com/78n/SimpleSpy/main/SimpleSpySource.lua"))()
    end
})

-- Initialize Orion Library
OrionLib:Init()
print("Orion Library initialized successfully!")
