local OrionLib = loadstring(game:HttpGet(('https://raw.githubusercontent.com/jensonhirst/Orion/main/source')))()

-- Player setup
local player = game.Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()

-- ESP setup
local highlightColor = Color3.fromRGB(255, 0, 0) -- Default red
local refreshInterval = 3 -- Refresh every 3 seconds
local espEnabled = false -- Toggle state
local espObjects = {} -- Stores ESP objects

-- List of possible bridge model names
local bridgeNames = {"BlueBridge", "CyanBridge", "GreenBridge", "OrangeBridge", "PinkBridge", "PurpleBridge", "RedBridge", "YellowBridge"}

-- Function to create ESP
local function createESP(player)
    local character = player.Character
    if not character then return end
    local highlight = Instance.new("Highlight")
    highlight.FillColor, highlight.OutlineColor = highlightColor, highlightColor
    highlight.Parent = character
    local billboard = Instance.new("BillboardGui")
    billboard.Adornee = character:FindFirstChild("Head") or character:FindFirstChild("HumanoidRootPart")
    billboard.Size, billboard.StudsOffset = UDim2.new(0, 200, 0, 50), Vector3.new(0, 2, 0)
    billboard.AlwaysOnTop = true
    local nametag = Instance.new("TextLabel")
    nametag.Text, nametag.TextColor3 = player.Name, highlightColor
    nametag.Size, nametag.BackgroundTransparency = UDim2.new(1, 0, 1, 0), 1
    nametag.Parent = billboard
    billboard.Parent = character
    espObjects[player] = {highlight, billboard}
end

-- Function to remove ESP
local function removeESP(player)
    if espObjects[player] then
        for _, obj in pairs(espObjects[player]) do obj:Destroy() end
        espObjects[player] = nil
    end
end

-- Function to toggle ESP
local function toggleESP()
    espEnabled = not espEnabled
    for _, player in pairs(game.Players:GetPlayers()) do
        if player ~= game.Players.LocalPlayer then
            if espEnabled then createESP(player) else removeESP(player) end
        end
    end
end

-- Function to teleport to selected bridge
local function teleportToBridge(bridgeName)
    -- Find the model in Workspace
    local bridgeModel = game.Workspace:FindFirstChild(bridgeName)
    
    if bridgeModel then
        -- Get the position of the bridge model
        local bridgePosition = bridgeModel.PrimaryPart and bridgeModel.PrimaryPart.Position or bridgeModel:GetModelCFrame().Position
        
        -- Teleport the player's character to the bridge position
        character:SetPrimaryPartCFrame(CFrame.new(bridgePosition))
    else
        warn(bridgeName .. " not found in Workspace!")
    end
end

-- Create the OrionLib window
local Window = OrionLib:MakeWindow({
    Name = "Bridge Teleporter & ESP",
    HidePremium = false,
    SaveConfig = true,
    ConfigFolder = "OrionTest"
})

-- Create a Tab for the main section
local Tab = Window:MakeTab({
    Name = "Main Tab",
    Icon = "rbxassetid://4483345998",
    PremiumOnly = false
})

-- Create a Section for ESP functionality
local SectionESP = Tab:AddSection({
    Name = "ESP Section"
})

-- Add a Color Picker for the ESP color
Tab:AddColorpicker({
    Name = "ESP Color Picker",
    Default = Color3.fromRGB(255, 0, 0),  -- Default to red
    Callback = function(Value)
        highlightColor = Value
        -- Refresh ESP
        if espEnabled then
            for player, _ in pairs(espObjects) do
                removeESP(player)
                createESP(player)
            end
        end
    end    
})

-- Add a Toggle to enable/disable ESP
Tab:AddToggle({
    Name = "Enable ESP",
    Default = false,
    Callback = function(Value)
        espEnabled = Value
        for _, player in pairs(game.Players:GetPlayers()) do
            if player ~= game.Players.LocalPlayer then
                if espEnabled then createESP(player) else removeESP(player) end
            end
        end
    end
})

-- Create a Section for the Teleportation functionality
local SectionTP = Tab:AddSection({
    Name = "Teleport Section"
})

-- Add a Dropdown menu to select a bridge
Tab:AddDropdown({
    Name = "Select Bridge",
    Default = bridgeNames[1],  -- Default to the first bridge in the list
    Options = bridgeNames,  -- List of bridge names
    Callback = function(selectedBridge)
        -- Teleport to the selected bridge
        teleportToBridge(selectedBridge)
    end    
})

-- Initialize the OrionLib interface
OrionLib:Init()

-- Input listener for ESP toggle with E key (can be disabled with checkbox)
game:GetService("UserInputService").InputBegan:Connect(function(input, gameProcessed)
    if input.KeyCode == Enum.KeyCode.E and not gameProcessed then
        toggleESP()
    end
end)

-- Periodic refresh to update ESP
while true do
    wait(refreshInterval)
    if espEnabled then
        for player, _ in pairs(espObjects) do
            removeESP(player)
            createESP(player)
        end
    end
end
